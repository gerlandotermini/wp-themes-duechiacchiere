window.addEventListener("DOMContentLoaded",()=>{const n=(e,t)=>{e.addEventListener("click",t,!1),e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchend",e=>e.preventDefault())};var e=e=>{e=("; "+document.cookie).split("; "+e+"=");return 2===e.length?decodeURIComponent(e.pop().split(";").shift()):""},t=e=>getComputedStyle(document.documentElement).getPropertyValue(e).trim(),t={mobile:window.matchMedia(`(max-width: ${t("--bp-mobile-max")})`),tablet:window.matchMedia(`(min-width: ${t("--bp-tablet-min")})`),large:window.matchMedia(`(min-width: ${t("--bp-large-min")})`)};const a=document.getElementById("backtotop");if(window.onscroll=()=>{a&&(600<document.body.scrollTop||600<document.documentElement.scrollTop?a.classList.add("active"):a.classList.remove("active"))},document.body.classList.contains("single")){const L=()=>{var e=document.getElementById("restore-reply-button");e&&(e.classList.remove("visually-hidden"),e.removeAttribute("id"))},w=(document.querySelectorAll(".comment-reply-link").forEach(t=>{n(t,e=>{e.preventDefault(),L(),t.setAttribute("id","restore-reply-button"),t.classList.add("visually-hidden");e=document.getElementById("reply-title"),e.hasAttribute("data-original-title")||e.setAttribute("data-original-title",e.textContent),e.textContent=t.getAttribute("data-replyto"),document.getElementById("comment_parent").value=t.getAttribute("data-commentid"),e=document.getElementById("comment-submit"),e.hasAttribute("data-original-value")&&(e.value=e.getAttribute("data-original-value")),e=document.getElementById("comment");e.style.display="block","[##like##]"==e.value&&(e.value=""),document.getElementById("like-comment-reply").style.display="block",t.closest("li").appendChild(document.getElementById("comment-form").parentElement),document.getElementById("cancel-comment-reply").style.display="block",e.focus()})}),document.getElementById("cancel-comment-reply"));w&&n(w,e=>{e.preventDefault(),L(),w.style.display="none";e=document.getElementById("reply-title"),e.textContent=e.getAttribute("data-original-title"),e=document.getElementById("comment-submit"),e.hasAttribute("data-original-value")&&(e.value=e.getAttribute("data-original-value")),e=document.getElementById("comment");e.style.display="block","[##like##]"==e.value&&(e.value=""),document.getElementById("like-section").style.display="block",document.getElementById("comment_parent").value=0,document.getElementById("comments").appendChild(document.getElementById("comment-form").parentElement),e.focus()}),document.getElementById("comment-form").addEventListener("submit",e=>{e.preventDefault();let t=!0;e.target.querySelectorAll("[required]").forEach(e=>{t=t&&""!=e.value.trim()});var n=e.target.querySelector("#email");(t=n&&!n.value.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?!1:t)?e.target.submit():(document.getElementById("comment-submit").classList.add("shake"),setTimeout(()=>document.getElementById("comment-submit").classList.remove("shake"),500))});var l=document.getElementById("like-comment-reply");l&&n(l,e=>{e.preventDefault();e=document.getElementById("comment"),e.style.display="none",e.value="[##like##]",e=document.getElementById("reply-title"),e.hasAttribute("data-original-title")||e.setAttribute("data-original-title",e.textContent),e.textContent="Ti Ã¨ piaciuto questo post? Dimmi chi sei.",e=document.getElementById("comment-submit");e.hasAttribute("data-original-value")||e.setAttribute("data-original-value",e.value),e.value="Mi piace",document.getElementById("cancel-comment-reply").style.display="block",document.getElementById("like-section").style.display="none",document.getElementById("like-section").after(document.getElementById("comment-form").parentElement),document.getElementById("author").focus()})}void 0!==duechiacchiere.COOKIEHASH&&(document.getElementById("author")&&(document.getElementById("author").value=e("comment_author_"+duechiacchiere.COOKIEHASH)),document.getElementById("email")&&(document.getElementById("email").value=e("comment_author_email_"+duechiacchiere.COOKIEHASH)),document.getElementById("url"))&&(document.getElementById("url").value=e("comment_author_url_"+duechiacchiere.COOKIEHASH));const o=document.getElementById("mobile-nav-button"),i=document.getElementById("mobile-search-button"),c=document.getElementById("menu-overlay"),r=document.getElementById("primary-menu");let s,d=[],m=document.getElementById("search-form-widget");const u=(e,t,n,a)=>{e.addEventListener(t,n,a),d.push({el:e,type:t,fn:n,options:a})},p=e=>{c&&("hide"===e?(c.classList.remove("active"),document.body.style.paddingRight=0):(c.classList.add("active"),s=document.documentElement.clientWidth,document.body.style.paddingRight=document.documentElement.clientWidth-s+"px"))},y=e=>{r&&o&&("close"!==e&&m?.classList.contains("active")&&v("close"),"close"===e||o.classList.contains("active")?(r.classList.remove("active"),o.classList.remove("active"),p("hide")):(r.classList.add("active"),o.classList.add("active"),p("show")))},v=e=>{m&&i&&("close"!==e&&o?.classList.contains("active")&&y("close"),"close"===e||i.classList.contains("active")?(m.classList.remove("active"),i.classList.remove("active"),p("hide"),m.addEventListener("transitionend",function e(){m.removeEventListener("transitionend",e)})):(m.style.zIndex=475,m.classList.add("active"),i.classList.add("active"),document.getElementById("search-field").focus(),p("show")))},g=()=>{o&&(u(o,"click",()=>y("toggle")),u(o,"touchstart",e=>{e.preventDefault(),y("toggle")},{passive:!1})),i&&(u(i,"click",()=>v("toggle")),u(i,"touchstart",e=>{e.preventDefault(),v("toggle")},{passive:!1})),y("close"),v("close")},h=()=>{console.log("Exited mobile mode"),d.forEach(({el:e,type:t,fn:n,options:a})=>e.removeEventListener(t,n,a)),d=[],y("close"),v("close")},E=(t.mobile.addEventListener("change",e=>{(e.matches?g:h)()}),t.mobile.matches&&g(),document.querySelectorAll("#primary-menu .menu-item-has-children").forEach(t=>{var e=t.querySelector(":scope > a"),e=(e.setAttribute("aria-expanded","false"),e.textContent);t.querySelector("a").insertAdjacentHTML("afterend",`<a class="svg open-submenu" href="#" aria-expanded="false" aria-haspopup="true"><span class="visually-hidden"> apri il sottomenu per ${e}</span></a>`),n(t.querySelector(".open-submenu"),e=>{"touchstart"!==e.type&&e.preventDefault(),t.classList.add("active"),t.querySelectorAll(":scope > a").forEach(e=>e.setAttribute("aria-expanded","true"))})}),document.getElementById("live-results")),b=document.getElementById("search-field"),f=document.createElement("textarea"),I="//"+window.location.hostname+"/wp-json/wp/v2/posts?per_page=20&search=";let A=0,B=-1;if(b&&E){E.setAttribute("role","listbox"),E.setAttribute("aria-live","polite"),b.setAttribute("aria-expanded","false"),b.setAttribute("aria-owns","live-results");const k=()=>Array.from(E.querySelectorAll('li[role="option"]')),x=n=>{var e=k();e.forEach((e,t)=>e.classList.toggle("active",t===n)),-1<(B=n)?(b.setAttribute("aria-activedescendant",e[n].id),e[n].scrollIntoView({block:"nearest"})):b.removeAttribute("aria-activedescendant")},C=async()=>{var e;if(b.value.length<3)E.innerHTML="",E.style.display="none",b.setAttribute("aria-expanded","false"),B=-1;else try{var t=document.getElementById("search-category"),n=I+encodeURIComponent(b.value)+(t?"&categories="+t.value:""),a=await fetch(n);if(!a.ok)throw new Error("Network error");var l=await a.json();e=l,E.innerHTML="",B=-1,e.length?e.forEach((e,t)=>{f.innerHTML=e.title.rendered;var n=document.createElement("li"),t=(n.setAttribute("role","option"),n.setAttribute("id","live-result-"+t),document.createElement("a"));t.href=e.link,t.textContent=f.value,n.appendChild(t),E.appendChild(n)}):((e=document.createElement("li")).textContent="Nessun risultato trovato",E.appendChild(e)),E.style.display="block",b.setAttribute("aria-expanded","true")}catch(e){console.error(e)}};b.addEventListener("input",()=>{clearTimeout(A),A=setTimeout(C,500)}),b.addEventListener("keydown",e=>{var t=k();if(t.length)switch(e.key){case"ArrowDown":e.preventDefault(),x((B+1)%t.length);break;case"ArrowUp":e.preventDefault(),x((B-1+t.length)%t.length);break;case"Enter":e.preventDefault(),-1<B?t[B].querySelector("a").click():b.form.submit();break;case"Escape":E.style.display="none",b.setAttribute("aria-expanded","false"),x(-1)}}),document.addEventListener("click",e=>{E.contains(e.target)||b.contains(e.target)||(E.style.display="none",b.setAttribute("aria-expanded","false"),x(-1))})}document.querySelectorAll("#main-wrapper a").forEach(e=>{var t;e.hostname!==location.hostname.replace("www.","")&&(e.target="_blank",e.querySelector(".visually-hidden")||e.insertAdjacentHTML("beforeend",'<span class="visually-hidden"> (apre una nuova finestra)</span>'),(t=(e.getAttribute("rel")||"").split(" ")).includes("noopener")||t.push("noopener"),e.setAttribute("rel",t.join(" ").trim()))});l=new Date,e=document.querySelector("#widget-back-in-time ul");e&&e.insertAdjacentHTML("beforeend",`<li><a href="/?day=${l.getDate()}&amp;monthnum=${l.getMonth()+1}&amp;year=0" rel="nofollow">Oggi nel passato</a></li>`)});